<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="scripts/modernizr.js" type="text/javascript"></script>
    <link href="css/index.css" rel="stylesheet" />


    <link rel='stylesheet prefetch' href='http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css'>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <script type="text/javascript" src="scripts/jquery.1.5.2.min.js"></script>
    <script src="scripts/index.js"></script>
</head>
<body>




    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header full_with">

                <a class="navbar-brand" href="DashBoard.html">
                    <img id="imgLogo" src="" alt="Logo" style="float:left;" />
                    <span id="lblCompany" style="font-size:x-large" class="loginspan">---</span>
                </a>
                <div class="left_img">
                    <!--<button id="btnLogout" class="logout" type="submit" value="Logout" onclick="return onClick(6);" > <i class="fa fa-sign-out fa-2x"> </i> </button>-->
                    <ul class="menu_login">
                        <li>
                            <button class="logout">
                                <i class="fa fa-bars fa-2x"></i>
                            </button>
                            <ul class="submenu_login">
                                <li>
                                    <a href="UserProfile.html">
                                        <i class="fa fa-user"></i>
                                        User Profile
                                    </a>
                                </li>
                                <li>
                                    <a href="ChangePassword.html">
                                        <i class="fa fa-exchange"></i>

                                        Change  Password
                                    </a>
                                </li>
                                <li>
                                    <a href="#" onclick="return Logout();">
                                        <i class="fa fa-sign-out"></i>
                                        Log Out
                                    </a>
                                </li>

                            </ul>
                        </li>
                    </ul>

                </div>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <!-- /.navbar-collapse -->

        </div><!-- /.container-fluid -->
    </nav>



    <div class="container-fluid ">


        <div class="row">
            <div class="col-md-2 col-sm-2"></div>
            <div class="col-md-8 col-sm-8">
                <form class="form-horizontal" role="form">

                    <div class="form-group">
                        <h3 style="text-align:center;color:#fff;background-color:#0d7192;border-top:double; padding:8px 0; margin:0;border-bottom:double;border-left:double;border-right:double;">
                            <i class="fa fa-money fa-1x pull-left" style="margin-left:9px"> </i>
                            Validate Payment
                            <a href="DashBoard.html">
                                <i class="fa fa-times-circle fa-1x pull-right" style="margin-right:9px; cursor:pointer; color:#fff!important;"> </i>
                            </a>
                        </h3>

                    </div>

                    <div class="form-group">
                        <label class="control-label col-sm-6  col-xs-5" for="newpwd">  Mobile No.:</label>
                        <div class="col-sm-6  col-xs-7">
                            <div class="form-control">
                                <span style="display:inline-block;float:left">254</span>
                                <input id="txtSMobileNo" style="display:inline-block!important;float:left" onkeydown="return txtboxPress(this,event,false)" type="text" onblur="return  MobilePaymentValidation(1);" />
                            </div>
                        </div>
                    </div>

               

                    <div class="form-group">
                        <label class="control-label col-sm-6  col-xs-5" for="repwd"> Reciept No: </label>
                        <div class="col-sm-6  col-xs-7">
                            <input id="txtSRecieptNo" type="text" class="form-control" />
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="control-label col-sm-6  col-xs-5" for="repwd"> Vehicle No: </label>
                        <div class="col-sm-6  col-xs-7">
                            <input id="txtSVehicleNo" style="text-transform:uppercase" type="text" class="form-control" />
                        </div>
                    </div>

                    <div class="col-sm-3 col-xs-12 " style="padding-top:0px!important;padding-bottom:4px!important;">
                        <button type="button" id="btnValidate" onclick="return DispalyDetails()" class="btn btn-cess pull-right"><span><i class=" icon-plus"></i>&nbsp;Validate</span></button>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-6 col-xs-5" for="cpwd">Reciept Date:</label>
                        <div class="col-sm-6 col-xs-7">
                            <input id="txtRecieptDate" type="text" class="form-control" disabled="disabled" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-6 col-xs-5" for="cpwd">Reciept Time:</label>
                        <div class="col-sm-6 col-xs-7">
                            <input id="txtRecieptTime" type="text" class="form-control" disabled="disabled" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-6  col-xs-5" for="repwd"> Towards: </label>
                        <div class="col-sm-6 col-xs-7">
                            <input id="txtTowards" type="text" class="form-control" disabled="disabled" />

                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-6 col-xs-5" for="cpwd">Amount:</label>
                        <div class="col-sm-6 col-xs-7">
                            <input id="txtAmt" type="text" class="form-control" disabled="disabled" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-6  col-xs-5" for="newpwd">  Mobile No.:</label>
                        <div class="col-sm-6  col-xs-7">
                            <input id="txtMobileNo" class="form-control" type="text" disabled="disabled" />

                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-6  col-xs-5" for="repwd"> Ref No.: </label>
                        <div class="col-sm-6  col-xs-7">
                            <input id="txtRefNo" type="text" class="form-control" disabled="disabled" />
                        </div>
                    </div>


                    <div class="form-group">
                        <label class="control-label col-sm-6  col-xs-5" for="repwd"> Counter: </label>
                        <div class="col-sm-6  col-xs-7">
                            <input id="txtCounter" type="text" class="form-control" disabled="disabled" />

                        </div>
                    </div>

                    <div class="form-group">
                        <div class=" col-sm-8 col-xs-12 col-sm-offset-4 ">
                            <div class="btnholder  pull-right">
                            <button class="butcan btn btn-default" id="btnCancel" type="submit" value="Cancel" onclick="return ClearAll()" aria-hidden="true" data-dismiss="modal">  <i class="fa fa-times-circle-o">&nbsp; </i>   <span>Cancel</span></button>
                                <a href="DashBoard.html" class="butsub btn btn-default">
                                    <!--<button class="butsub btn btn-default" onclick="return Close();" aria-hidden="true" data-dismiss="modal" type="button">-->
                                    <i class=" fa fa-hand-o-left"></i><span>&nbsp;Back</span>
                                    <!--</button>-->
                                </a>
                            </div>
                            <label id="lblErr" style="color:red">  </label>
                        </div>
                     
                    </div>
                </form>
            </div>
            <div class="col-md-2 col-sm-2"></div>
        </div>


    </div>
    <script type="text/javascript" src="scripts/jquery.1.5.2.min.js"></script>
    <script type="text/javascript" src="scripts/jquery.1.5.2.min.js"></script>
    <script src="scripts/jquery.alphanum.js"></script>
    <script src="scripts/jquery.jsonp-2.4.0.min.js"></script>
    <script type="text/javascript">

       // var ip = "http://109.73.172.90:8031/";
        //var ip = "http://localhost:8000/";
        var ip = IPStr();

        var reLogin = "0", forceLogout = "0", t = 0;

        window.onload = fillItems();
       

        function DispalyDetails() {
            var Filter;
            if ($("#txtSRecieptNo").val().trim() == "" && $("#txtSVehicleNo").val().trim() == "")
            {
                $("#lblErr").text("Please Enter Reciept No. OR Vehicle No. !!!");
                $("#txtSRecieptNo").focus();
                return false;
            }
            if ($("#txtSMobileNo").val().trim() == "")
            {
                $("#lblErr").text("Please Enter Mobile No");
                $("#txtSMobileNo").focus();
                return false;
            }
            //if ($("#txtSVehicleNo").val() == "") {
            //    Filter = "ReceiptNO=" + $("#txtSRecieptNo").val() + "&MobileNo=" + $("#txtSMobileNo").val();
            //}
            //else
            //{
            //    "ReceiptNO=" + $("#txtSRecieptNo").val() + "&MobileNo=" + $("#txtSMobileNo").val() + "&VehicleNo=" + $("#txtSVehicleNo").val();
            //}
            
            $("#lblErr").text("");
                $.support.cors = true;
                $.ajax({
                    type: "GET",
                    url: ip + "FeeCollectionService.svc/ValidateReceipt?ReceiptNO=" + $("#txtSRecieptNo").val() + "&MobileNo=254" + $("#txtSMobileNo").val() + "&VehicleNo=" + $("#txtSVehicleNo").val(),
                    dataType: "json",
                    success: function (data) {
                        var result = data.d;
                        if (result != null) {
                          
                            $("#txtRecieptDate").val(result.RecieptDate);
                            $("#txtRecieptTime").val(result.RecieptTime);
                            $("#txtTowards").val(result.Towards);
                            $("#txtAmt").val(result.Amount);
                            $("#txtMobileNo").val(result.Mobile);
                            $("#txtRefNo").val(result.RefNo);
                            $("#txtCounter").val(result.CounterID.split(':')[1]);
                            if (localStorage.getItem("CounterID") != result.CounterID.split(':')[0])
                                alert("Invalid Counter !!!");
                            var dt = Date();
                            dt = dt.substr(8, 2) + "-" + dt.substr(4, 3) + "-" + dt.substr(11, 4);
                            if (result.RecieptDate.trim() != dt.trim())
                            {
                                alert("Invalid Receipt for : "+  Date());
                            }
                        }
                    },
                    error: function (request, status, exception) {
                        alert("Invalid Data, No records found !!! " );
                       // alert(exception + '  ' + request.responseText);
                    },
                    complete: function (request, status) { }
                });
            }
      
        function ClearAll() {
            $("#lblErr").text("");
            $("#txtSRecieptNo").val("");
            $("#txtSMobileNo").val("");
            $("#txtRecieptDate").val("");
            $("#txtRecieptTime").val("");
            $("#txtTowards").val("");
            $("#txtAmt").val("");
            $("#txtMobileNo").val("");
            $("#txtRefNo").val("");
            $("#txtCounter").val("");
        }

 
        function Logout() {
            LogOut();
            window.location = "index.html";
        }
    </script>

    <script type="text/javascript">

        window.onload = loadForm();

        function loadForm() {
            $("#lblCompany").text(localStorage.getItem("CompanyName"));
            $("#imgLogo").attr("src", localStorage.getItem("CompanyLogo"));
            // $("#lblName").text(localStorage.getItem("userName"));
          
            
            $("#txtSMobileNo").css("width", parseInt($("#txtSVehicleNo").css("width")) - 30);
           
        }

        $(window).resize(function () {

            $("#txtSMobileNo").css("width", parseInt($("#txtSVehicleNo").css("width")) - 30);


        });
    </script>
    <script src="cordova.js"></script>
    <script src="scripts/platformOverrides.js"></script>

    <script src="scripts/bootstrap.js"></script>
    <!--<script src="scripts/index.js"></script>-->
</body>

</html>